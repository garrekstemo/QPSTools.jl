[English](README.en.md) | [日本語](README.ja.md)

# ブートストラップ

既存のJuliaプロジェクトにQPSToolsを追加します。1つのコマンドで
パッケージのインストール、解析テンプレートのコピー、標準ディレクトリ
構造の作成をすべて行います。

## セットアップ

1. https://github.com/garrekstemo/QPSTools.jl にアクセス
2. 緑色の **Code** ボタン → **Download ZIP** をクリック
3. ダウンロードしたファイルを解凍
4. `bootstrap/` フォルダをプロジェクトディレクトリにコピー

プロジェクトがまだない場合は、まず空のフォルダを作成してください：

```bash
mkdir my-project
```

`bootstrap/` を中に入れて `my-project/bootstrap/` になるようにします。

（解凍した他のファイルは削除してOKです。必要なのは `bootstrap/` だけです。）

## インストール

プロジェクトルートから実行：

```bash
cd my-project
julia --project=. bootstrap/install.jl
```

## 確認

```julia
julia --project=.
julia> using Revise, QPSTools
julia> using GLMakie
```

## インストールされるもの

**パッケージ**（Project.tomlに追加）：

| パッケージ | 用途 |
|-----------|------|
| QPSTools | 解析、フィッティング、プロット |
| SpectroscopyTools | 基本型と分光関数 |
| JASCOFiles | JASCO FTIR/UV-visファイル読み込み |
| GLMakie | インタラクティブなプロット |
| Revise | コードのライブリロード |

**テンプレート**（`templates/`にコピー）：

| ファイル | 種類 | 説明 |
|---------|------|------|
| `explore_raman.jl` | 探索 | GLMakie + DataInspector |
| `explore_ftir.jl` | 探索 | GLMakie + DataInspector |
| `explore_plmap.jl` | 探索 | GLMakie + DataInspector |
| `raman_analysis.jl` | 解析 | CairoMakie、PNG保存 |
| `ftir_analysis.jl` | 解析 | CairoMakie、PNG保存 |
| `plmap_analysis.jl` | 解析 | CairoMakie、PNG保存 |

---

## プロジェクト構造とワークフロー

### 推奨フォルダ構成

```
my-project/
├── Project.toml
├── data/                # 機器の生データ（元ファイルは変更しない）
│   ├── raman/
│   ├── ftir/
│   └── PLmap/
├── explore/             # 一時的な探索スクリプト（自由に作成）
├── templates/           # 出発点（コピーして使う、直接編集しない）
├── analysis/            # 完成した再現可能な解析
│   └── MoSe2_A1g/
│       ├── analysis.jl
│       └── figures/
└── manuscript/          # 論文用の出版品質の図
```

### ワークフロー

```
  ┌─────────────────────────────────────────────────────────────────┐
  │                       データ                                     │
  │             機器からの生データを data/ に置く                        │
  └───────────────────────────┬─────────────────────────────────────┘
                              │
                              v
  ┌─────────────────────────────────────────────────────────────────┐
  │                       探索                                       │
  │                                                                 │
  │  テンプレートを explore/ にコピーしてREPLで1行ずつ実行する。          │
  │  GLMakie使用 -- ズーム、パン、ホバーでインタラクティブに操作。        │
  │  これらのスクリプトは一時的：素早く、雑でもOK、使い捨て。             │
  │  いくつでも作ってよい。終わったら削除してよい。                       │
  │                                                                 │
  │  cp templates/explore_raman.jl explore/sample_Aを見る.jl          │
  └───────────────────────────┬─────────────────────────────────────┘
                              │
                     面白い結果が見つかった？
                              │
                              v
  ┌─────────────────────────────────────────────────────────────────┐
  │                       解析                                       │
  │                                                                 │
  │  解析テンプレートを analysis/<テーマ>/ にコピーする。                 │
  │  CairoMakie使用 -- 出版品質のPNG/PDFを保存。                       │
  │  これらのスクリプトは永続的：きれいで、文書化され、再現可能。           │
  │  研究室の誰でも再実行して同じ結果を得られるように。                    │
  │                                                                 │
  │  mkdir -p analysis/MoSe2_A1g                                     │
  │  cp templates/raman_analysis.jl analysis/MoSe2_A1g/analysis.jl   │
  └───────────────────────────┬─────────────────────────────────────┘
                              │
                     論文を書く準備ができた？
                              │
                              v
  ┌─────────────────────────────────────────────────────────────────┐
  │                     原稿                                         │
  │                                                                 │
  │  複数の解析からパネルを組み合わせて複合図を作成する。                  │
  │  CairoMakie + PDF出力で論文用のベクター画像を作る。                  │
  │  これらのスクリプトが論文の最終図そのものを生成する。                  │
  └───────────────────────────┬─────────────────────────────────────┘
                              │
                              v
  ┌─────────────────────────────────────────────────────────────────┐
  │                     eLABFTW                             (近日)   │
  │                                                                 │
  │  eLabFTWは研究室の電子実験ノート。QPSToolsから解析結果、              │
  │  フィットパラメータ、図を関数1つでノートに記録できる。                 │
  │  実験の追跡、チームとの結果共有、出版用の図の整理が簡単になる。         │
  └─────────────────────────────────────────────────────────────────┘
```

### 探索スクリプト -- 素早く使い捨て

探索スクリプトは**今のあなた**のためのものです。永続的である必要も
きれいである必要もありません。目的はデータをインタラクティブに見て、
何が起きているか理解することです。

- テンプレートをコピー：`cp templates/explore_raman.jl explore/my_idea.jl`
- VS Codeで開いて1行ずつ実行（Shift+Enter）
- DataInspectorでズーム、パン、データ上にホバー
- 必要なだけ作る -- サンプルごと、質問ごとに1つずつ
- 終わったら削除してよい；その役目は果たした

**自分の探索スクリプトをどんどん書いてください。** テンプレートは
出発点にすぎません。2つのスペクトルを比較したい、ベースラインを引きたい、
フィットをデータに重ねたい -- `explore/` にスクリプトを書いて
試してみましょう。

### 解析スクリプト -- きれいで再現可能

解析スクリプトは**研究室全体**のためのものです。数ヶ月後に別の学生が
理解して再実行できるくらいきれいに書きましょう。

- テンプレートをコピー：`cp templates/raman_analysis.jl analysis/MoSe2_A1g/analysis.jl`
- データパスと解析パラメータを編集
- スクリプト全体を実行：`julia --project=. analysis/MoSe2_A1g/analysis.jl`
- 図は `analysis/MoSe2_A1g/figures/` に保存される
- gitにコミットして解析を保存

**自分の解析スクリプトをどんどん書いてください。** データを探索して
どんなストーリーがあるか分かったら、そのストーリーを捉えるきれいな
解析を書きましょう。未来の自分と研究室の仲間が感謝します。

### QPSToolsの関数について

QPSToolsの関数は**柔軟で使いやすい**ことを目指しています。
データの読み込み、ピークフィッティング、結果のプロット -- これらは
それぞれ1〜2行で済むべきで、50行も書く必要はありません。もし何かが
使いにくい、分かりにくい、期待通りに動かないと感じたら、それは
あなたの問題ではなく、ツールの問題です。

**ガレックに教えてください。** 関数が使いにくい場合や、必要な機能が
ない場合はぜひ知らせてください。さらに良いのは、自分でコードを
編集してみることです（やり方を教えます）。一緒に解析関数を改善
しましょう。あなたの改善が研究室全員の役に立ちます。

### 近日公開：eLabFTW連携

[eLabFTW](https://www.elabftw.net/)は研究室で実験管理に使用している
オープンソースの電子実験ノートです。QPSToolsはeLabFTWと直接連携して、
以下のことが可能になります：

- フィット結果やパラメータをノートに自動記録
- 関数1つで実験に図を添付
- サンプル、手法、プロジェクトごとにタグ付け
- キーワードやタグで研究室全体の実験を検索

Juliaでの解析結果が検索・共有可能な研究記録に直接流れる仕組みです。
手作業のコピー&ペーストは不要になります。
